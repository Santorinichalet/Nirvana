
<!-- A minimal working example with onclick save -->
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Test Save</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
</head>
<body>
  <button onclick="openPopupManual()">Ø§ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø­Ø¬Ø² Ø§Ù„ÙŠØ¯ÙˆÙŠØ©</button>

  <script>
    function openPopupManual() {
      const existing = document.querySelector("#customPopup");
      if (existing) existing.remove();

      const popup = document.createElement("div");
      popup.id = "customPopup";
      popup.style.position = "fixed";
      popup.style.top = "50%";
      popup.style.left = "50%";
      popup.style.transform = "translate(-50%, -50%)";
      popup.style.background = "white";
      popup.style.padding = "20px";
      popup.style.boxShadow = "0 0 10px rgba(0,0,0,0.3)";
      popup.style.zIndex = "10000";

      popup.innerHTML = `
        <label>Ù†ÙˆØ¹ Ø§Ù„Ø­Ø¬Ø²:</label>
        <select id="type"><option value="Ù…Ø­Ø¬ÙˆØ²">Ù…Ø­Ø¬ÙˆØ²</option><option value="Ø¹Ø±Ø¨ÙˆÙ†">Ø¹Ø±Ø¨ÙˆÙ†</option></select><br>
        <label>Ø§Ù„Ù…Ø¨ÙŠØª:</label>
        <select id="stay"><option value="Ù…Ø¨ÙŠØª">Ù…Ø¨ÙŠØª</option><option value="Ø¨Ø¯ÙˆÙ† Ù…Ø¨ÙŠØª">Ø¨Ø¯ÙˆÙ† Ù…Ø¨ÙŠØª</option></select><br>
        <label>Ø§Ù„Ù…Ø¨Ù„Øº:</label>
        <input id="amount" type="number"><br>
        <label>Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ†:</label>
        <input id="deposit" type="number"><br>
        <label>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:</label>
        <input id="remaining" type="number" readonly><br>
        <label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</label>
        <select id="payment"><option value="ÙƒØ§Ø´">ÙƒØ§Ø´</option><option value="ÙÙŠØ²Ø§">ÙÙŠØ²Ø§</option></select><br>
        <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</label>
        <textarea id="notes"></textarea><br>
        <button id="saveButton" onclick="saveToFirebase()">ğŸ’¾ Ø­ÙØ¸</button>
      `;

      document.body.appendChild(popup);
    }

    function saveToFirebase() {
      alert("ğŸš€ Ø­ÙØ¸ Ø¨Ø¯Ø£");

      const data = {
        type: document.getElementById("type")?.value || "",
        stay: document.getElementById("stay")?.value || "",
        amount: document.getElementById("amount")?.value || "",
        deposit: document.getElementById("deposit")?.value || "",
        remaining: document.getElementById("remaining")?.value || "",
        payment: document.getElementById("payment")?.value || "",
        notes: document.getElementById("notes")?.value || "",
        date: new Date().toISOString()
      };

      try {
        const firebaseConfig = {
          apiKey: "AIzaSyCG17oEvXw-B0MBkZPLaCBYncuIOwgrsOo",
          authDomain: "test-f9621.firebaseapp.com",
          projectId: "test-f9621",
          storageBucket: "test-f9621.appspot.com",
          messagingSenderId: "293849144617",
          appId: "1:293849144617:web:80fd77e8f8da3a98ca2b38",
          measurementId: "G-DM7VPHRHQG"
        };

        if (!firebase.apps.length) {
          firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.firestore();
        db.collection("reservations").add(data)
          .then(() => alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"))
          .catch((err) => {
            alert("âŒ Ø®Ø·Ø£: " + err.message);
            console.error(err);
          });
      } catch (err) {
        alert("âŒ Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹");
        console.error(err);
      }
    }
  </script>
</body>
</html>
